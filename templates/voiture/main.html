{% extends "voiture/navigation.html" %}
{% load static %}
{% block content %}

<main class="container mx-auto mt-5 pt-5 px-4">

    {% include "voiture/user/chercher.html" %}

    <!-- CARROUSEL -->
    <section class="mt-5 relative">
        <div class="relative w-full overflow-hidden rounded-lg shadow-2xl">
            <div class="relative h-96">
                <img src="{% static 'images/honda.jpg' %}" class="absolute w-full h-full object-cover animate-fadeIn">
                <div class="absolute inset-0 bg-gradient-to-b from-black/40 via-black/25 to-black/40 flex flex-col justify-center px-6 text-white">
                    <h2 class="text-4xl md:text-5xl font-extrabold mb-2 drop-shadow-lg animate-fadeUp">Trouvez la voiture idéale <i class="bi bi-car-front-fill"></i></h2>
                    <p class="text-lg md:text-xl mb-4 drop-shadow animate-fadeUp delay-200">Des centaines de véhicules disponibles immédiatement.</p>
                    <a href="#featured" class="self-start bg-red-600 hover:bg-red-700 transition px-6 py-3 rounded-lg font-semibold drop-shadow animate-fadeUp delay-400">
                        Explorer les voitures
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION MARQUES -->
    <section class="mt-8">
        <h2 class="text-2xl md:text-3xl font-bold mb-4 animate-fadeUp">À vous de choisir <i class="bi bi-stars"></i></h2>
        <div class="flex justify-between items-center mb-3 animate-fadeUp delay-100">
            <h5 class="font-semibold text-lg">Rechercher par marque de voiture</h5>
            <a href="#" class="text-red-600 font-semibold hover:underline transition">Voir toutes les voitures</a>
        </div>
        <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4 animate-fadeUp delay-200">
            {% comment %} Exemple → boucle Django possible {% endcomment %}
            {% for marque in marques %}
            <a href="#" class="brand-card bg-white rounded-xl p-4 flex flex-col items-center transition-transform transform hover:scale-105 hover:shadow-2xl hover:-translate-y-1 animate-fadeIn">
                <img src="{{ marque.logo.url }}" class="brand-logo mb-2 w-20 h-20 object-contain">
                <span class="font-bold">{{ marque.nom }}</span>
                <span class="text-gray-500 text-sm">({{ marque.nb_voitures }})</span>
            </a>
            {% endfor %}
        </div>
    </section>

    <!-- VOITURES EN VEDETTE -->
    <section id="featured" class="mt-10">
        <h3 class="text-2xl md:text-3xl font-bold mb-4 animate-fadeUp">Voitures en vedette <i class="bi bi-star-fill text-yellow-400"></i></h3>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
            {% for voiture in voitures %}
            <div class="car-card bg-white rounded-xl shadow-lg overflow-hidden transform transition-all duration-500 hover:scale-105 hover:shadow-2xl hover:-translate-y-1 animate-fadeIn">
                <img src="{% if voiture.photo %}{{ voiture.photo.url }}{% else %}{% static 'images/mazda.png' %}{% endif %}" class="car-card-img w-full h-48 object-cover transition-transform duration-500 hover:scale-110">
                <div class="p-4 flex flex-col h-48 justify-between">
                    <h5 class="font-bold text-lg mb-1 text-gray-800">{{ voiture.marque.nom }} {{ voiture.modele.nom }}</h5>
                    <p class="text-red-600 font-semibold mb-2 text-lg">{{ voiture.prix }} € <i class="bi bi-currency-euro"></i></p>
                    <a href="{% url 'details' voiture.id %}" class="block w-full text-center bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 transition transform hover:scale-105 shadow-md">
                        <i class="bi bi-eye"></i> Voir détails
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>

</main>

<!-- ===== Animations CSS ===== -->
<style>
@keyframes fadeUp {
  0% { opacity: 0; transform: translateY(20px); }
  100% { opacity: 1; transform: translateY(0); }
}
@keyframes fadeIn {
  0% { opacity: 0; transform: scale(0.95); }
  100% { opacity: 1; transform: scale(1); }
}
.animate-fadeUp { animation: fadeUp 0.8s ease forwards; }
.animate-fadeUp.delay-100 { animation-delay: 0.1s; }
.animate-fadeUp.delay-200 { animation-delay: 0.2s; }
.animate-fadeUp.delay-400 { animation-delay: 0.4s; }
.animate-fadeIn { animation: fadeIn 0.8s ease forwards; }
</style>
{% endblock content %}
