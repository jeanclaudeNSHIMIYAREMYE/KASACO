{% load static %}

<!DOCTYPE html>

<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}KASACO{% endblock %}</title>

```
<!-- Bootstrap CSS 5 -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

<!-- CSS personnalisé -->
<link rel="stylesheet" href="{% static 'styles.css' %}">

<!-- Favicon -->
<link rel="icon" type="image/png" href="{% static 'images/logo.png' %}">

 

</head>

<body>

    {% if messages %}
  {% for message in messages %}
    <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
      {{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  {% endfor %}
{% endif %}

<!-- ======== Navbar ======== -->

<nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm fixed-top">
  <div class="container">
    <a class="navbar-brand fw-bold text-danger d-flex align-items-center" href="#">
        <img src="{% static 'images/logo.png' %}" alt="Logo" width="70" class="me-2">
    
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
<div class="collapse navbar-collapse justify-content-end" id="navbarNav">
  <ul class="navbar-nav align-items-lg-center">
    <li class="nav-item"><a class="nav-link" href="#">Chercher des voitures</a></li>
    <li class="nav-item"><a class="nav-link" href="#">Comment acheter</a></li>
    <li class="nav-item"><a class="nav-link" href="#">Pourquoi choisir KASACO</a></li>
    <li class="nav-item"><a class="nav-link" href="#">Support</a></li>
    <li class="nav-item"><a class="nav-link" href="#">Contact</a></li>
    <li class="nav-item"><a class="nav-link" href="{% url 'logout' %}">Déconnexion</a></li>
  </ul>
</div>


  </div>
</nav>

<!-- ======== Contenu principal ======== -->
{% include 'voiture/user/chercher.html' %}
<!-- Cartes voitures -->
<div class="row">
    {% for voiture in voitures %}
    <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-4">
        <div class="card h-100 shadow-sm">

            {% if voiture.photo %}
                <img src="{{ voiture.photo.url }}" alt="{{ voiture.modele.nom }}" class="card-img-top">
            {% else %}
                <img src="{% static 'images/mazda.png' %}" alt="Voiture par défaut" class="card-img-top">
            {% endif %}

            <div class="card-body d-flex flex-column">
                <h5 class="card-title" id="aa{{ voiture.id }}">
                    {{ voiture.marque.nom }} - {{ voiture.modele.nom }} ({{ forloop.counter }})
                </h5>

                <p class="card-text text-warning fw-bold">
                    Prix : <span id="price{{ voiture.id }}">{{ voiture.prix }}</span> $
                </p>

  


                <div class="mt-auto d-flex flex-column gap-1">
                    <a href="{% url 'details' voiture.id %}" class="btn btn-warning btn-sm">Voir</a>
            
                
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
</div>

<!-- Pagination -->
<nav>
    <ul class="pagination justify-content-center">
        {% if voitures.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page={{ voitures.previous_page_number }}">Précédent</a>
            </li>
        {% else %}
            <li class="page-item disabled"><a class="page-link" href="#">Précédent</a></li>
        {% endif %}

        {% for num in voitures.paginator.page_range %}
            <li class="page-item {% if num == voitures.number %}active{% endif %}">
                <a class="page-link" href="?page={{ num }}">{{ num }}</a>
            </li>
        {% endfor %}

        {% if voitures.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ voitures.next_page_number }}">Suivant</a>
            </li>
        {% else %}
            <li class="page-item disabled"><a class="page-link" href="#">Suivant</a></li>
        {% endif %}
    </ul>
</nav>

{% block content %}{% endblock %}


</main>

<!-- ======== Footer ======== -->
<!-- ======== Pied de page ======== -->
<footer class="bg-dark text-white py-4 mt-auto">
    <div class="container">
        <div class="row">
            <div class="col-md-4 mb-3">
                <h5 class="fw-bold">KARINZI SAB COMPANY "KASACO"</h5>
                <p>* Vente et importation des véhicules locales</p>
                <p>* Vente et importation des véhicules en ligne</p>
                <p>* Garages.</p>
            </div>
            <div class="col-md-4 mb-3">
                <h5 class="fw-bold">Contact & Infos Légales</h5>
                <p>Email: nduwamungudism7@gmail.com</p>
                <p>Téléphone: +257 69 080 278 / +257 62 227 155</p>
                <p>Adresse: Bujumbura-Burundi, Commune Ntahangwa, Avenue: OUA Maison Saint Pierre, 1er étage D1; D2</p>
                <p>NIF: 4002477083; RC: 0051659/23</p>
            </div>
            <div class="col-md-4 mb-3">
                <h5 class="fw-bold">Suivez-nous</h5>
                <p>
                    <a href="#" class="text-white me-2">Facebook</a>
                    <a href="#" class="text-white me-2">Twitter</a>
                    <a href="#" class="text-white">Instagram</a>
                </p>
            </div>
        </div>
        <div class="text-center mt-3">
            <!-- Copyright information kept from the original snippet -->
            <p class="mb-0">&copy; KASACO 2025-2026. Mr.Django.Z-Pro.</p>
        </div>
    </div>
</footer>



<!-- Scripts JS -->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

<script>
    // Popover
    $(function () { $('[data-toggle="popover"]').popover(); });

    // Gestion panier
    let panier = JSON.parse(localStorage.getItem('panier') || '{}');
    function afficherPanier() {
        let contenu = "<h5>Voici votre liste</h5>";
        let index = 1;
        for (let id in panier) {
            contenu += index + ". " + panier[id][1] + " Qte: " + panier[id][0] + "<br>";
            index++;
        }
        contenu += "<a href='/checkout' class='btn btn-primary mt-2'>Checkout</a>";
        $('#panier').attr('data-content', contenu);
    }
    afficherPanier();

    $(document).on('click', '.ted', function() {
        let item_id = this.id.toString();
        let prix = parseFloat(document.getElementById("price"+item_id).innerHTML);
        let nom = document.getElementById("aa"+item_id).innerHTML;

        if (panier[item_id]) {
            panier[item_id][0] += 1;
            panier[item_id][2] += prix;
        } else {
            panier[item_id] = [1, nom, prix];
        }

        localStorage.setItem('panier', JSON.stringify(panier));
        document.getElementById("panier").innerHTML = "Panier(" + Object.keys(panier).length + ")";
        afficherPanier();
    });
</script>

{% block js %}{% endblock %}

</body>
</html>
