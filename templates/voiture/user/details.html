{% extends "voiture/user/navUser.html" %}
{% block content %}

<!-- Messages -->
{% if messages %}
<div class="mb-6">
    {% for message in messages %}
    <div class="p-3 rounded-lg mb-2 text-white
        {% if message.tags == 'success' %} bg-green-600 {% endif %}
        {% if message.tags == 'error' %} bg-red-600 {% endif %}
        shadow-md">
        {{ message }}
    </div>
    {% endfor %}
</div>
{% endif %}

<div class="container mx-auto px-4 py-10">
    <div class="flex flex-col md:flex-row md:space-x-10 space-y-6 md:space-y-0 items-start">

        <!-- Côté Images -->
        <div class="w-full md:w-1/2 space-y-4">

            <!-- Images supplémentaires -->
            {% if images_supp %}
            <div class="grid grid-cols-3 sm:grid-cols-4 gap-4 mt-4">
                {% for img in images_supp %}
                    <div class="border rounded-lg overflow-hidden shadow-sm hover:shadow-lg transition-shadow cursor-pointer">
                        <img src="{{ img.image.url }}" alt="Image {{ forloop.counter }}"
                             class="w-full h-32 sm:h-36 md:h-40 object-cover transition-transform duration-300 hover:scale-105"
                             onclick="changeMainImage('{{ img.image.url }}')">
                    </div>
                {% endfor %}
            </div>
            {% endif %}

        </div>


        <!-- Côté Infos -->
        <div class="w-full md:w-1/2 space-y-4">

            <h2 class="text-3xl font-bold text-red-600 hover:text-red-700 transition-colors">
                {{ voiture.modele.nom }}
            </h2>
            <h4 class="text-xl font-semibold text-orange-500">
                Prix : {{ voiture.prix }} $
            </h4>

            <p class="text-gray-700"><span class="font-semibold">Marque :</span> {{ voiture.marque.nom }}</p>
            <p class="text-gray-700"><span class="font-semibold">Châssis :</span> {{ voiture.numero_chassis }}</p>
            <p class="text-gray-700"><span class="font-semibold">État :</span> {{ voiture.etat }}</p>
            <p class="text-gray-700"><span class="font-semibold">Date d'ajout :</span> {{ voiture.date_ajout }}</p>

            {% if voiture.etat == "Disponible" %}
                <a href="{% url 'reserver_voiture' voiture.id %}"
                   class="inline-flex items-center px-6 py-3 bg-red-600 text-white font-semibold rounded-full shadow-lg hover:bg-red-700 hover:shadow-xl transition-all duration-300">
                   Réserver
                </a>
            {% else %}
                <button class="px-6 py-3 bg-gray-400 text-white font-semibold rounded-full cursor-not-allowed opacity-70">
                    Non disponible
                </button>
            {% endif %}
    <a href="{% url 'user_home'%}"
   class="inline-flex items-center px-8 py-3 bg-indigo-600 text-white font-bold rounded-lg shadow-md hover:bg-indigo-700 hover:shadow-xl hover:scale-105 transition transform duration-300">
   Accueil
</a>



        </div>
    </div>
</div>

<!-- JS pour changer l'image principale -->
<script>
function changeMainImage(url) {
    const mainImage = document.getElementById('mainImage');
    if (mainImage) {
        mainImage.src = url;
    }
}
</script>

{% endblock content %}
