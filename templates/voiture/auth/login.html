{% extends 'voiture/navigation.html' %}

{% block content %}
{% load static %}
{% load widget_tweaks %}

<!-- Wrapper principal full page avec image de fond -->
<div class="flex items-center justify-center min-h-screen bg-cover bg-center px-4"
     style="background-image: url('{% static 'images/honda.jpg' %}'); margin-top:70px;">

    <!-- Formulaire centré et responsive -->
    <div class="bg-white shadow-xl rounded-2xl p-4 sm:p-6  max-w-xs sm:max-w-sm bg-opacity-90">

        <h3 class="text-center text-lg sm:text-xl font-bold mb-4 sm:mb-6 text-gray-800">
            <i class="fa fa-user-circle mr-2 text-red-600"></i> Connexion
        </h3>

        <!-- FORMULAIRE DE CONNEXION -->
        <form method="POST" novalidate class="space-y-3 sm:space-y-4">
            {% csrf_token %}

            {% for field in form %}
            <div class="flex flex-col">
                {% if field.name == "username" %}
                    <label for="{{ field.id_for_label }}" class="mb-1 font-medium text-gray-700 text-xs sm:text-sm">Email</label>
                {% elif field.name == "password" %}
                    <label for="{{ field.id_for_label }}" class="mb-1 font-medium text-gray-700 text-xs sm:text-sm">Mot de passe</label>
                {% else %}
                    <label for="{{ field.id_for_label }}" class="mb-1 font-medium text-gray-700 text-xs sm:text-sm">{{ field.label }}</label>
                {% endif %}

                {{ field|add_class:"w-full border border-gray-300 rounded-lg px-2 sm:px-3 py-1.5 sm:py-2 text-xs sm:text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none transition duration-200" }}

                {% if field.errors %}
                    <p class="text-red-600 text-[10px] sm:text-xs mt-1">{{ field.errors|striptags }}</p>
                {% endif %}
            </div>
            {% endfor %}

            <button type="submit"
                class="w-full bg-red-600 text-white py-2 sm:py-2.5 rounded-lg font-semibold text-xs sm:text-sm
                       hover:bg-red-700 transition duration-300 shadow-md hover:shadow-lg flex items-center justify-center">
                <i class="fa fa-sign-in-alt mr-2"></i> Se connecter
            </button>
        </form>

        <div class="text-center mt-3 sm:mt-4 text-xs sm:text-sm">
            <p class="text-gray-600">
                Pas encore de compte ? 
                <a href="{% url 'signup' %}" class="text-red-600 font-medium hover:underline">Créer un compte</a>
            </p>
        </div>

    </div>
</div>

<script>
    // Masquer automatiquement les alertes après 1 seconde
    setTimeout(() => {
        const alerts = document.querySelectorAll(".message-alert");
        alerts.forEach(alert => {
            alert.classList.add("opacity-0");
            setTimeout(() => {
                alert.remove();
            }, 500);
        });
    }, 1000);
</script>

{% endblock %}
