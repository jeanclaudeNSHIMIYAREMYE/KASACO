{% extends "voiture/navigation.html" %}
{% load static %}

{% block content %}
<div class="relative min-h-screen flex items-center justify-center overflow-hidden">

    <!-- Fond animé -->
    <div class="absolute inset-0 bg-gradient-to-r from-red-500 via-orange-400 to-yellow-400 animate-gradient-x"></div>
    <div class="absolute inset-0 bg-black/40"></div>

    <!-- Contenu -->
    <div class="relative z-10 w-full px-4 py-16 max-w-6xl text-center">

        <!-- Titre animé -->
        <h1 id="animated-title"
            class="text-2xl sm:text-3xl md:text-5xl font-extrabold bg-gradient-to-r from-red-500 via-pink-500 to-purple-500 bg-clip-text text-transparent
                   inline-block overflow-hidden whitespace-nowrap border-r-4 border-red-500 pr-2
                   animate-fade-up delay-500">
            {{ title }}
        </h1>

        <!-- Description -->
        <p class="mt-4 sm:mt-6 text-sm sm:text-base md:text-lg text-gray-100 animate-fade-up delay-1000">
            Chez KASACO, nous offrons des services fiables et des véhicules de qualité. Découvrez pourquoi
            des centaines de clients nous font confiance chaque année.
        </p>

        <!-- Grid features responsive -->
        <div class="mt-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 sm:gap-6 md:gap-8">
            {% for feature in features %}
            <div class="group relative p-4 sm:p-6 md:p-8 rounded-2xl shadow-lg text-center overflow-hidden
                        transition transform hover:-translate-y-1 hover:scale-105 hover:shadow-2xl
                        bg-white/90 animate-fade-up"
                 style="animation-delay: {{ forloop.counter0|add:"0.1"|floatformat:1 }}s;">

                <!-- Icône -->
                <div class="flex justify-center mb-3">
                    <div class="w-12 h-12 sm:w-14 sm:h-14 md:w-16 md:h-16 flex items-center justify-center rounded-full
                                bg-white/80 group-hover:bg-red-50 transition shadow-md">
                        <i class="{{ feature.icon }} text-xl sm:text-2xl md:text-3xl text-red-600 group-hover:text-red-700 transition"></i>
                    </div>
                </div>

                <!-- Titre -->
                <h3 class="text-sm sm:text-base md:text-lg font-semibold mb-1 sm:mb-2
                           bg-gradient-to-r from-red-500 via-pink-500 to-purple-500
                           bg-clip-text text-transparent transition group-hover:scale-105">
                    {{ feature.title }}
                </h3>

                <!-- Description -->
                <p class="text-gray-700 text-xs sm:text-sm md:text-base">{{ feature.description }}</p>
            </div>
            {% endfor %}
        </div>

        <!-- CTA -->
        <div class="mt-6 sm:mt-8 md:mt-12">
            <a href="{% url 'signup' %}"
               class="inline-block bg-red-600 text-white px-4 sm:px-5 md:px-6 py-2 sm:py-2.5 md:py-3 rounded-xl font-semibold
                      shadow-lg hover:shadow-xl hover:bg-red-700 hover:scale-105 transition transform animate-fade-up delay-2000">
                Rejoignez-nous dès aujourd'hui
            </a>
        </div>

    </div>
</div>

<!-- ================= CSS Animations ================= -->
<style>
    /* Gradient animé */
    @keyframes gradient-x {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
    }
    .animate-gradient-x {
        background-size: 200% 200%;
        animation: gradient-x 12s ease infinite;
    }

    /* Fade-up */
    @keyframes fadeUp {
        0% { opacity: 0; transform: translateY(20px); }
        100% { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-up { animation: fadeUp 0.8s ease forwards; opacity: 0; }

    /* Typing effect */
    @keyframes typing {
        from { width: 0; }
        to { width: 100%; }
    }
    @keyframes blink {
        50% { border-color: transparent; }
    }
    #animated-title {
        width: 0;
        animation: typing 2s steps(30, end) forwards, blink 0.75s step-end infinite;
    }

    /* Responsive tweaks */
    @media (max-width: 640px) {
        #animated-title { font-size: 1.75rem; } /* mobile */
    }
</style>

<!-- ================= JS pour stagger des features ================= -->
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const features = document.querySelectorAll(".animate-fade-up");
        features.forEach((el, i) => {
            el.style.animationDelay = `${0.5 + i*0.2}s`;
        });
    });
</script>

{% endblock %}
